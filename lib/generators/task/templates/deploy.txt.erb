namespace :after_party do
  desc '<%= task_description %>'
  task <%= file_name %>: :environment do
    puts "Running deploy task '<%= file_name %>'"

    # Wrap your code in a transaction to ensure the database is not left in a bad
    #  state if the task fails and the release is rolled back.
    ActiveRecord::Base.transaction do
      # Put your task implementation HERE.
    end

    # Update task as completed. If you remove the line below, the task will
    #  run with every deploy (or every time you call `after_party:run`).
    AfterParty::TaskRecord.create(
      version: AfterParty::TaskRecorder.new(__FILE__).timestamp
    )
  end
end
